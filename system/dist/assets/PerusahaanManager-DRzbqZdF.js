import{r as u,j as a,a as c,S as i}from"./index-CMRaJyvN.js";function v(){const[e,r]=u.useState({}),[m,g]=u.useState(!0);u.useEffect(()=>{(async()=>{try{const t=await c.get("/api/admin/perusahaan");r(t.data.data)}catch(t){console.error("‚ùå Gagal memuat data perusahaan:",t),i.fire("Error","Gagal memuat data perusahaan","error")}finally{g(!1)}})()},[]);const h=s=>{const t=s.target.value.trim(),p=/([-+]?\d+\.\d+),\s*([-+]?\d+\.\d+)/,o=t.match(p),f=/@([-+]?\d+\.\d+),([-+]?\d+\.\d+)/,d=t.match(f);let l=null,n=null;d?(l=parseFloat(d[1]),n=parseFloat(d[2])):o&&(l=parseFloat(o[1]),n=parseFloat(o[2])),l&&n?(r(x=>({...x,latitude:l,longitude:n})),i.fire({icon:"success",title:"Koordinat Ditemukan!",html:`
          <p>Latitude: <b>${l}</b></p>
          <p>Longitude: <b>${n}</b></p>
          <br/>
          <small style="color:red">‚ö†Ô∏è Perhatian: Silakan ketik <b>Alamat Lengkap</b> secara manual agar sesuai.</small>
        `,timer:3e3,showConfirmButton:!1})):i.fire({icon:"info",title:"Koordinat Tidak Terbaca",text:"Pastikan link mengandung format angka koordinat (contoh: @-6.917,107.619)"})},b=async s=>{s.preventDefault();try{await c.put("/api/admin/perusahaan",{alamat:e.alamat,latitude:e.latitude,longitude:e.longitude,radius_m:e.radius_m}),i.fire({title:"‚úÖ Berhasil!",text:"Data perusahaan berhasil diperbarui.",icon:"success",confirmButtonColor:"#4F46E5"})}catch(t){console.error("Error save:",t),i.fire("‚ùå Gagal","Terjadi kesalahan saat menyimpan.","error")}};return m?a.jsx("div",{className:"text-center p-10 text-gray-500",children:"‚è≥ Memuat data..."}):a.jsxs("section",{children:[a.jsx("h2",{className:"text-xl font-bold mb-4",children:"üè¢ Kelola Data Perusahaan"}),a.jsx("p",{className:"text-gray-600 mb-4",children:"Admin dapat memperbarui lokasi kantor perusahaan dan radius presensi. ID perusahaan otomatis mengikuti akun login."}),a.jsx("div",{className:"bg-white p-6 rounded-lg shadow w-full md:w-2/3 transition-transform hover:shadow-lg",children:a.jsxs("form",{onSubmit:b,className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block font-semibold mb-1",children:"ID Perusahaan"}),a.jsx("input",{value:e.id_perusahaan||"",disabled:!0,className:"w-full border p-2 rounded bg-gray-100 text-gray-600"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block font-semibold mb-1",children:"Nama Perusahaan"}),a.jsx("input",{value:e.nama_perusahaan||"",disabled:!0,className:"w-full border p-2 rounded bg-gray-100 text-gray-600"})]}),a.jsxs("div",{className:"bg-blue-50 p-3 rounded border border-blue-200",children:[a.jsx("label",{className:"block font-semibold mb-1 text-blue-800",children:"üìç Paste Link Google Maps"}),a.jsx("input",{type:"text",placeholder:"Tempel link Google Maps di sini (harus ada @lat,long)",className:"w-full border p-2 rounded focus:ring-2 focus:ring-blue-500 outline-none",onChange:h}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Contoh: https://www.google.com/maps/.../@-6.917,107.619..."})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block font-semibold mb-1",children:"Alamat Perusahaan"}),a.jsx("textarea",{value:e.alamat||"",onChange:s=>r({...e,alamat:s.target.value}),className:"w-full border p-2 rounded focus:ring-2 focus:ring-indigo-500",rows:"3",required:!0})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block font-semibold mb-1",children:"Latitude"}),a.jsx("input",{type:"number",step:"any",value:e.latitude||"",onChange:s=>r({...e,latitude:parseFloat(s.target.value)}),className:"w-full border p-2 rounded bg-gray-50 focus:bg-white focus:ring-2 focus:ring-indigo-500",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block font-semibold mb-1",children:"Longitude"}),a.jsx("input",{type:"number",step:"any",value:e.longitude||"",onChange:s=>r({...e,longitude:parseFloat(s.target.value)}),className:"w-full border p-2 rounded bg-gray-50 focus:bg-white focus:ring-2 focus:ring-indigo-500",required:!0})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block font-semibold mb-1",children:"Radius Kantor (meter)"}),a.jsx("input",{type:"number",value:e.radius_m||"",onChange:s=>r({...e,radius_m:parseInt(s.target.value)}),className:"w-full border p-2 rounded focus:ring-2 focus:ring-indigo-500",required:!0})]}),a.jsx("div",{className:"flex justify-end pt-4",children:a.jsx("button",{type:"submit",className:"px-6 py-2 bg-indigo-600 text-white rounded hover:bg-indigo-700 active:scale-95 transition-all font-semibold",children:"üíæ Simpan Perubahan"})})]})})]})}export{v as default};
