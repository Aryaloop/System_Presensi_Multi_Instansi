import{r,b as z,u as $,j as e,S as N,a as _}from"./index-CMRaJyvN.js";/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H=s=>s.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),E=s=>s.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,i,l)=>l?l.toUpperCase():i.toLowerCase()),A=s=>{const t=E(s);return t.charAt(0).toUpperCase()+t.slice(1)},D=(...s)=>s.filter((t,i,l)=>!!t&&t.trim()!==""&&l.indexOf(t)===i).join(" ").trim(),F=s=>{for(const t in s)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var R={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B=r.forwardRef(({color:s="currentColor",size:t=24,strokeWidth:i=2,absoluteStrokeWidth:l,className:u="",children:d,iconNode:y,...x},f)=>r.createElement("svg",{ref:f,...R,width:t,height:t,stroke:s,strokeWidth:l?Number(i)*24/Number(t):i,className:D("lucide",u),...!d&&!F(x)&&{"aria-hidden":"true"},...x},[...y.map(([m,h])=>r.createElement(m,h)),...Array.isArray(d)?d:[d]]));/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o=(s,t)=>{const i=r.forwardRef(({className:l,...u},d)=>r.createElement(B,{ref:d,iconNode:t,className:D(`lucide-${H(A(s))}`,`lucide-${s}`,l),...u}));return i.displayName=A(s),i};/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],P=o("calendar",K);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],q=o("chevron-right",W);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],Z=o("chevron-left",O);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Q=o("circle-check-big",J);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],S=o("circle-x",U);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],V=o("clock",G);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],Y=o("download",X);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ee=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],ae=o("funnel",ee);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const te=[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]],se=o("hash",te);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ne=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]],le=o("pencil",ne);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const re=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],ie=o("search",re);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oe=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],de=o("triangle-alert",oe),b=({title:s,value:t,icon:i,color:l})=>e.jsxs("div",{className:"bg-white p-4 rounded-xl border border-gray-100 shadow-sm flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500 mb-1 font-medium uppercase tracking-wide",children:s}),e.jsx("h3",{className:"text-2xl font-bold text-gray-800",children:t})]}),e.jsx("div",{className:`p-3 rounded-lg ${l}`,children:e.jsx(i,{size:24,className:"text-white"})})]}),ce=({status:s})=>{const t={HADIR:"bg-emerald-100 text-emerald-700 border-emerald-200",TERLAMBAT:"bg-orange-100 text-orange-700 border-orange-200",IZIN:"bg-blue-100 text-blue-700 border-blue-200",WFH:"bg-purple-100 text-purple-700 border-purple-200",ALFA:"bg-red-100 text-red-700 border-red-200"};return e.jsx("span",{className:`px-2.5 py-0.5 rounded-full text-[10px] font-bold border ${t[s]||"bg-gray-100"}`,children:s})},C=s=>s?new Date(s).toLocaleTimeString("id-ID",{hour:"2-digit",minute:"2-digit"}):"-",xe=(s,t)=>!s||!t?!1:new Date(s).toTimeString().slice(0,5)>t.slice(0,5);function ue(){const s=z(),[t,i]=r.useState(new Date().getMonth()+1),[l,u]=r.useState(new Date().getFullYear()),[d,y]=r.useState("ALL"),[x,f]=r.useState(""),[m,h]=r.useState(1),[L]=r.useState(10),[I,v]=r.useState(!1),[n,g]=r.useState(null),{data:w,isLoading:M}=$({queryKey:["admin-kehadiran",t,l,d,x,m],queryFn:async()=>(await _.get("/api/admin/kehadiran",{params:{bulan:t,tahun:l,status:d,search:x,page:m,limit:L}})).data,keepPreviousData:!0}),c=w?.data||[],k=w?.pagination||{total_page:1,total_data:0},p=r.useMemo(()=>c?{hadir:c.filter(a=>a.status==="HADIR"||a.status==="WFH").length,terlambat:c.filter(a=>a.status==="TERLAMBAT").length,izin:c.filter(a=>a.status==="IZIN").length,alfa:c.filter(a=>a.status==="ALFA").length}:{hadir:0,terlambat:0,izin:0,alfa:0},[c]),T=async a=>{a.preventDefault();try{await _.patch(`/api/admin/kehadiran/${n.id_kehadiran}`,{status:n.status,jam_masuk:n.jam_masuk?new Date(n.jam_masuk).toISOString():null,jam_pulang:n.jam_pulang?new Date(n.jam_pulang).toISOString():null,keterangan:n.keterangan}),N.fire("Sukses","Data kehadiran berhasil dikoreksi.","success"),v(!1),s.invalidateQueries(["admin-kehadiran"])}catch{N.fire("Gagal","Terjadi kesalahan saat menyimpan.","error")}};return r.useEffect(()=>{h(1)},[t,l,d,x]),e.jsxs("div",{className:"p-6 space-y-6 bg-gray-50 min-h-screen",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"Manajemen Kehadiran"}),e.jsx("p",{className:"text-gray-500 text-sm",children:"Monitor aktivitas absensi karyawan secara real-time."})]}),e.jsxs("button",{onClick:()=>N.fire("Info","Fitur export akan segera hadir!","info"),className:"flex items-center gap-2 bg-indigo-600 hover:bg-indigo-700 text-white px-4 py-2 rounded-lg transition shadow-sm text-sm font-medium",children:[e.jsx(Y,{size:18})," Export Laporan"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsx(b,{title:"Total Hadir",value:p.hadir,icon:Q,color:"bg-emerald-500"}),e.jsx(b,{title:"Terlambat",value:p.terlambat,icon:V,color:"bg-amber-500"}),e.jsx(b,{title:"Izin / Sakit",value:p.izin,icon:de,color:"bg-blue-500"}),e.jsx(b,{title:"Tidak Absen (Alfa)",value:p.alfa,icon:S,color:"bg-red-500"})]}),e.jsxs("div",{className:"bg-white p-4 rounded-xl border border-gray-100 shadow-sm flex flex-col md:flex-row gap-4 items-center justify-between",children:[e.jsxs("div",{className:"relative w-full md:w-1/3",children:[e.jsx(ie,{className:"absolute left-3 top-2.5 text-gray-400",size:18}),e.jsx("input",{type:"text",placeholder:"Cari Nama atau UID...",className:"w-full pl-10 pr-4 py-2 border rounded-lg text-sm focus:ring-2 focus:ring-indigo-500 outline-none",value:x,onChange:a=>f(a.target.value)})]}),e.jsxs("div",{className:"flex gap-2 w-full md:w-auto overflow-x-auto",children:[e.jsxs("div",{className:"flex items-center gap-2 border px-3 py-2 rounded-lg bg-gray-50",children:[e.jsx(P,{size:16,className:"text-gray-500"}),e.jsx("select",{value:t,onChange:a=>i(a.target.value),className:"bg-transparent text-sm outline-none cursor-pointer",children:Array.from({length:12},(a,j)=>e.jsx("option",{value:j+1,children:new Date(0,j).toLocaleString("id-ID",{month:"long"})},j+1))})]}),e.jsx("select",{value:l,onChange:a=>u(a.target.value),className:"border px-3 py-2 rounded-lg bg-gray-50 text-sm outline-none cursor-pointer",children:[2024,2025,2026].map(a=>e.jsx("option",{value:a,children:a},a))}),e.jsxs("div",{className:"flex items-center gap-2 border px-3 py-2 rounded-lg bg-gray-50",children:[e.jsx(ae,{size:16,className:"text-gray-500"}),e.jsxs("select",{value:d,onChange:a=>y(a.target.value),className:"bg-transparent text-sm outline-none cursor-pointer",children:[e.jsx("option",{value:"ALL",children:"Semua Status"}),e.jsx("option",{value:"HADIR",children:"Hadir"}),e.jsx("option",{value:"TERLAMBAT",children:"Terlambat"}),e.jsx("option",{value:"IZIN",children:"Izin"}),e.jsx("option",{value:"WFH",children:"WFH"}),e.jsx("option",{value:"ALFA",children:"Alfa"})]})]})]})]}),e.jsxs("div",{className:"bg-white rounded-xl border border-gray-100 shadow-sm overflow-hidden",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm text-left",children:[e.jsx("thead",{className:"bg-gray-50 text-gray-600 font-medium border-b",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-4",children:"Karyawan"}),e.jsx("th",{className:"px-6 py-4",children:"Tanggal"}),e.jsx("th",{className:"px-6 py-4",children:"Shift"}),e.jsx("th",{className:"px-6 py-4",children:"Jam Masuk"}),e.jsx("th",{className:"px-6 py-4",children:"Jam Pulang"}),e.jsx("th",{className:"px-6 py-4 text-center",children:"Status"}),e.jsx("th",{className:"px-6 py-4 text-center",children:"Aksi"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-100",children:M?e.jsx("tr",{children:e.jsx("td",{colSpan:"7",className:"text-center py-8",children:"â³ Memuat data..."})}):c.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"7",className:"text-center py-8 text-gray-400",children:"Data tidak ditemukan."})}):c.map(a=>e.jsxs("tr",{className:"hover:bg-gray-50 transition",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold text-gray-900",children:a.akun?.username}),e.jsxs("div",{className:"text-[10px] text-gray-400 font-mono flex items-center gap-1",children:[e.jsx(se,{size:10})," ",a.akun?.id_akun?.slice(0,8),"..."]})]})}),e.jsx("td",{className:"px-6 py-4 text-gray-600 whitespace-nowrap",children:new Date(a.created_at).toLocaleDateString("id-ID",{day:"numeric",month:"short",year:"numeric"})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"text-xs text-gray-500",children:[a.shift?.nama_shift||"Non-Shift",e.jsxs("div",{className:"opacity-70 text-[10px]",children:[a.shift?.jam_masuk?.slice(0,5)," - ",a.shift?.jam_pulang?.slice(0,5)]})]})}),e.jsx("td",{className:`px-6 py-4 font-mono ${xe(a.jam_masuk,a.shift?.jam_masuk)?"text-red-600 font-bold":"text-gray-700"}`,children:C(a.jam_masuk)}),e.jsx("td",{className:"px-6 py-4 font-mono text-gray-700",children:C(a.jam_pulang)}),e.jsx("td",{className:"px-6 py-4 text-center",children:e.jsx(ce,{status:a.status})}),e.jsx("td",{className:"px-6 py-4 text-center",children:e.jsx("button",{onClick:()=>{g({...a,jam_masuk:a.jam_masuk?new Date(a.jam_masuk).toISOString().slice(0,16):"",jam_pulang:a.jam_pulang?new Date(a.jam_pulang).toISOString().slice(0,16):""}),v(!0)},className:"bg-indigo-50 text-indigo-600 p-2 rounded-lg hover:bg-indigo-100 transition",children:e.jsx(le,{size:16})})})]},a.id_kehadiran))})]})}),e.jsxs("div",{className:"p-4 border-t flex items-center justify-between bg-gray-50",children:[e.jsxs("span",{className:"text-xs text-gray-500",children:["Hal ",m," dari ",k.total_page," (Total ",k.total_data," Data)"]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{disabled:m===1,onClick:()=>h(a=>Math.max(1,a-1)),className:"p-1.5 rounded border bg-white disabled:opacity-50 hover:bg-gray-100",children:e.jsx(Z,{size:16})}),e.jsx("button",{disabled:m>=k.total_page,onClick:()=>h(a=>a+1),className:"p-1.5 rounded border bg-white disabled:opacity-50 hover:bg-gray-100",children:e.jsx(q,{size:16})})]})]})]}),I&&n&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-md overflow-hidden",children:[e.jsxs("div",{className:"p-4 border-b bg-gray-50 flex justify-between items-center",children:[e.jsx("h3",{className:"font-bold text-gray-800",children:"Koreksi Kehadiran"}),e.jsx("button",{onClick:()=>v(!1),className:"text-gray-400 hover:text-red-500",children:e.jsx(S,{})})]}),e.jsxs("form",{onSubmit:T,className:"p-6 space-y-4",children:[e.jsxs("div",{className:"bg-blue-50 p-3 rounded-lg border border-blue-100 text-sm",children:[e.jsx("p",{className:"font-bold text-blue-800",children:n.akun?.username}),e.jsxs("p",{className:"text-blue-600 text-xs",children:["Tanggal: ",new Date(n.created_at).toLocaleDateString()]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-semibold text-gray-500 mb-1",children:"Status Kehadiran"}),e.jsxs("select",{className:"w-full border rounded-lg p-2 text-sm",value:n.status,onChange:a=>g({...n,status:a.target.value}),children:[e.jsx("option",{value:"HADIR",children:"HADIR"}),e.jsx("option",{value:"TERLAMBAT",children:"TERLAMBAT"}),e.jsx("option",{value:"IZIN",children:"IZIN"}),e.jsx("option",{value:"WFH",children:"WFH"}),e.jsx("option",{value:"ALFA",children:"ALFA"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-semibold text-gray-500 mb-1",children:"Jam Masuk"}),e.jsx("input",{type:"datetime-local",className:"w-full border rounded-lg p-2 text-xs",value:n.jam_masuk,onChange:a=>g({...n,jam_masuk:a.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-semibold text-gray-500 mb-1",children:"Jam Pulang"}),e.jsx("input",{type:"datetime-local",className:"w-full border rounded-lg p-2 text-xs",value:n.jam_pulang,onChange:a=>g({...n,jam_pulang:a.target.value})})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-semibold text-gray-500 mb-1",children:"Catatan Koreksi"}),e.jsx("textarea",{className:"w-full border rounded-lg p-2 text-sm h-20",placeholder:"Alasan perubahan...",value:n.keterangan||"",onChange:a=>g({...n,keterangan:a.target.value})})]}),e.jsx("button",{type:"submit",className:"w-full bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-2 rounded-lg transition",children:"Simpan Perubahan"})]})]})})]})}export{ue as default};
