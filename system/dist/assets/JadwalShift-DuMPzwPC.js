import{r,j as a,a as m,S as i}from"./index-CMRaJyvN.js";function k(){const[o,f]=r.useState([]),[x,n]=r.useState(!1),[t,l]=r.useState({id_shift:"",nama_shift:"",jam_masuk:"",jam_pulang:"",is_senin:!1,is_selasa:!1,is_rabu:!1,is_kamis:!1,is_jumat:!1,is_sabtu:!1,is_minggu:!1}),[d,u]=r.useState(!1),c=async()=>{try{const e=await m.get("/api/admin/shift");f(e.data.data)}catch{i.fire("âŒ Error","Gagal memuat daftar shift","error")}};r.useEffect(()=>{c()},[]);const h=e=>{l({...t,[e.target.name]:e.target.value})},p=e=>{l({...t,[e.target.name]:e.target.checked})},g=e=>{const s=[];return e.is_senin&&s.push("Sen"),e.is_selasa&&s.push("Sel"),e.is_rabu&&s.push("Rab"),e.is_kamis&&s.push("Kam"),e.is_jumat&&s.push("Jum"),e.is_sabtu&&s.push("Sab"),e.is_minggu&&s.push("Min"),s.length>0?s.join(", "):"-"},j=async e=>{e.preventDefault();try{const s=d?`/api/admin/shift/${t.id_shift}`:"/api/admin/shift";await(d?m.put:m.post)(s,{...t}),i.fire("âœ… Berhasil",`Shift berhasil ${d?"diedit":"ditambahkan"}`,"success"),n(!1),c()}catch{i.fire("âŒ Gagal","Terjadi kesalahan saat menyimpan shift","error")}},b=e=>{l({id_shift:e.id_shift,nama_shift:e.nama_shift,jam_masuk:e.jam_masuk,jam_pulang:e.jam_pulang,is_senin:e.is_senin,is_selasa:e.is_selasa,is_rabu:e.is_rabu,is_kamis:e.is_kamis,is_jumat:e.is_jumat,is_sabtu:e.is_sabtu,is_minggu:e.is_minggu}),u(!0),n(!0)},_=async e=>{if((await i.fire({title:"Hapus shift?",icon:"warning",showCancelButton:!0,confirmButtonText:"Ya, hapus"})).isConfirmed)try{await m.delete(`/api/admin/shift/${e}`),c(),i.fire("Terhapus!","","success")}catch{i.fire("Gagal","Error server","error")}};return a.jsxs("section",{children:[a.jsx("h2",{className:"text-xl font-bold mb-4",children:"ðŸ•’ Manajemen Shift Kerja"}),a.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[a.jsxs("div",{className:"flex justify-between mb-4",children:[a.jsx("h3",{className:"font-semibold text-lg",children:"Daftar Shift"}),a.jsx("button",{onClick:()=>{l({nama_shift:"",jam_masuk:"",jam_pulang:"",is_senin:!0,is_selasa:!0,is_rabu:!0,is_kamis:!0,is_jumat:!0,is_sabtu:!1,is_minggu:!1}),u(!1),n(!0)},className:"bg-indigo-600 text-white px-4 py-2 rounded hover:bg-indigo-700",children:"âž• Tambah Shift"})]}),x&&a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:a.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-lg w-[500px]",children:[a.jsx("h3",{className:"font-bold mb-4 text-lg",children:d?"Edit Shift":"Tambah Shift"}),a.jsxs("form",{onSubmit:j,className:"space-y-4",children:[a.jsx("input",{name:"nama_shift",placeholder:"Nama Shift (e.g. Regular Pagi)",value:t.nama_shift,onChange:h,className:"w-full border p-2 rounded",required:!0}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"text-xs text-gray-500",children:"Jam Masuk"}),a.jsx("input",{type:"time",name:"jam_masuk",value:t.jam_masuk,onChange:h,className:"w-full border p-2 rounded",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-xs text-gray-500",children:"Jam Pulang"}),a.jsx("input",{type:"time",name:"jam_pulang",value:t.jam_pulang,onChange:h,className:"w-full border p-2 rounded",required:!0})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-2",children:"Hari Kerja Aktif:"}),a.jsx("div",{className:"grid grid-cols-4 gap-2",children:["senin","selasa","rabu","kamis","jumat","sabtu","minggu"].map(e=>a.jsxs("label",{className:"flex items-center gap-2 cursor-pointer border p-2 rounded hover:bg-gray-50",children:[a.jsx("input",{type:"checkbox",name:`is_${e}`,checked:t[`is_${e}`],onChange:p,className:"accent-indigo-600"}),a.jsx("span",{className:"capitalize text-sm",children:e})]},e))})]}),a.jsxs("div",{className:"flex justify-end gap-2 mt-6",children:[a.jsx("button",{type:"button",onClick:()=>n(!1),className:"px-4 py-2 bg-gray-200 rounded",children:"Batal"}),a.jsx("button",{type:"submit",className:"px-4 py-2 bg-indigo-600 text-white rounded",children:"Simpan"})]})]})]})}),a.jsxs("table",{className:"w-full border text-sm",children:[a.jsx("thead",{className:"bg-gray-100",children:a.jsxs("tr",{children:[a.jsx("th",{className:"p-3 border text-left",children:"Nama Shift"}),a.jsx("th",{className:"p-3 border text-left",children:"Jam"}),a.jsx("th",{className:"p-3 border text-left",children:"Hari Kerja"}),a.jsx("th",{className:"p-3 border text-center",children:"Aksi"})]})}),a.jsx("tbody",{children:o.map(e=>a.jsxs("tr",{className:"hover:bg-gray-50",children:[a.jsx("td",{className:"p-3 border font-medium",children:e.nama_shift}),a.jsxs("td",{className:"p-3 border",children:[e.jam_masuk," - ",e.jam_pulang]}),a.jsx("td",{className:"p-3 border",children:a.jsx("span",{className:"bg-indigo-50 text-indigo-700 px-2 py-1 rounded text-xs font-semibold",children:g(e)})}),a.jsxs("td",{className:"p-3 border text-center space-x-2",children:[a.jsx("button",{onClick:()=>b(e),className:"text-yellow-600 hover:underline",children:"Edit"}),a.jsx("button",{onClick:()=>_(e.id_shift),className:"text-red-600 hover:underline",children:"Hapus"})]})]},e.id_shift))})]})]})]})}export{k as default};
