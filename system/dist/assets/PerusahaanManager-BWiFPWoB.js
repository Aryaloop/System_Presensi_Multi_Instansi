import{j as e,b as E,r as u,u as I,a as m,S as d}from"./index-CMRaJyvN.js";const V=({children:l,tone:t="gray"})=>{const r={green:"bg-green-100 text-green-700",red:"bg-red-100 text-red-700",yellow:"bg-yellow-100 text-yellow-700",gray:"bg-gray-100 text-gray-700",blue:"bg-blue-100 text-blue-700"};return e.jsx("span",{className:`px-2.5 py-1 rounded-full text-xs font-medium ${r[t]||r.gray}`,children:l})},f=({title:l,value:t,icon:r,tone:s="indigo",delta:i=null})=>{const p=s==="green"?"text-green-600":s==="blue"?"text-blue-600":s==="red"?"text-red-600":"text-indigo-600",j=s==="green"?"bg-green-50 text-green-600":s==="blue"?"bg-blue-50 text-blue-600":s==="red"?"bg-red-50 text-red-600":s==="yellow"?"bg-yellow-50 text-yellow-600":"bg-indigo-50 text-indigo-600";return e.jsxs("div",{className:"bg-white rounded-xl border shadow-sm p-5 transition-transform hover:-translate-y-1",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500 font-medium uppercase tracking-wide",children:l}),e.jsx("p",{className:`text-3xl font-bold mt-1 ${p}`,children:t})]}),e.jsx("span",{className:`inline-flex items-center justify-center w-12 h-12 rounded-xl ${j}`,children:r})]}),i&&e.jsxs("div",{className:"mt-3 flex items-center gap-2 text-xs",children:[e.jsx("span",{className:`w-2 h-2 rounded-full ${i.tone==="green"?"bg-green-500":"bg-gray-400"}`}),e.jsx("span",{className:`font-semibold ${i.tone==="green"?"text-green-600":"text-gray-500"}`,children:i.value}),e.jsx("span",{className:"text-gray-400",children:i.note||"dari bulan lalu"})]})]})},b=({tone:l="indigo",title:t,onClick:r,children:s})=>{const i={indigo:"text-indigo-600 hover:bg-indigo-50",blue:"text-blue-600 hover:bg-blue-50",red:"text-red-600 hover:bg-red-50",gray:"text-gray-600 hover:bg-gray-100",green:"text-green-600 hover:bg-green-50",yellow:"text-yellow-600 hover:bg-yellow-50"};return e.jsx("button",{type:"button",title:t,onClick:r,className:`p-1.5 rounded transition ${i[l]}`,children:s})};function Z(){const l=E(),[t,r]=u.useState(1),[s,i]=u.useState(""),[p,j]=u.useState(""),[S,x]=u.useState(!1),[y,v]=u.useState(!1),[n,h]=u.useState({id_perusahaan:"",nama_perusahaan:"",alamat:"",status:"Aktif",status_aktif:!0}),P=a=>{i(a.target.value),r(1),setTimeout(()=>{j(a.target.value)},500)},w=15,{data:N,isLoading:M}=I({queryKey:["perusahaanList",t,p],queryFn:async()=>(await m.get(`/api/superadmin/perusahaan?page=${t}&limit=${w}&search=${p}`)).data,keepPreviousData:!0}),c=(N?.data||[]).filter(a=>a.id_perusahaan!=="PRE010"),k=N?.total||0,C=Math.ceil(k/w),B=c.length,D=c.filter(a=>a.status_aktif===!0).length,A=c.filter(a=>a.status_aktif===!1).length,L=c.filter(a=>a.status_aktif===null||a.status_aktif===void 0).length,$=async a=>{a.preventDefault();try{const o=n.status==="Aktif"?!0:n.status==="Suspend"?!1:null,g={...n,status_aktif:o};y?(await m.put(`/api/superadmin/perusahaan/${n.id_perusahaan}`,g),d.fire("Berhasil","Data diperbarui","success")):(await m.post("/api/superadmin/perusahaan",g),d.fire("Berhasil","Perusahaan ditambahkan","success")),x(!1),l.invalidateQueries(["perusahaanList"])}catch(o){d.fire("Gagal",o.response?.data?.message||"Terjadi kesalahan","error")}},_=async(a,o)=>{try{await m.put(`/api/superadmin/suspend/${a}`,{status:!o}),l.invalidateQueries(["perusahaanList"]),d.fire("Sukses",`Perusahaan berhasil ${o?"disuspend":"diaktifkan"}`,"success")}catch{d.fire("Gagal","Gagal update status","error")}},H=async a=>{if((await d.fire({title:"Hapus Perusahaan?",text:"Data tidak bisa dikembalikan!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",confirmButtonText:"Ya, Hapus"})).isConfirmed)try{await m.delete(`/api/superadmin/perusahaan/${a}`),d.fire("Terhapus","Data berhasil dihapus","success"),l.invalidateQueries(["perusahaanList"])}catch(g){d.fire("Gagal",g.response?.data?.message||"Gagal menghapus","error")}},z=()=>{h({id_perusahaan:"",nama_perusahaan:"",alamat:"",status:"Aktif",status_aktif:!0}),v(!1),x(!0)},T=a=>{const o=a.status_aktif===!0?"Aktif":a.status_aktif===!1?"Suspend":"Pending";h({id_perusahaan:a.id_perusahaan,nama_perusahaan:a.nama_perusahaan,alamat:a.alamat,status:o,status_aktif:a.status_aktif}),v(!0),x(!0)};return e.jsxs("div",{className:"space-y-6 animate-fadeIn",children:[e.jsx("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:e.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"Manajemen Perusahaan"})}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsx(f,{title:"Total",value:B,tone:"indigo",icon:e.jsx("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",fill:"currentColor",children:e.jsx("path",{d:"M3 21h18V3H3v18Zm4-4h4v4H7v-4Zm6 0h4v4h-4v-4ZM7 7h4v4H7V7Zm6 0h4v4h-4V7Z"})})}),e.jsx(f,{title:"Aktif",value:D,tone:"green",icon:e.jsx("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",fill:"currentColor",children:e.jsx("path",{d:"M9 16.17 4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"})})}),e.jsx(f,{title:"Suspend",value:A,tone:"red",icon:e.jsx("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",fill:"currentColor",children:e.jsx("path",{d:"M6 6h12v12H6z"})})}),e.jsx(f,{title:"Pending",value:L,tone:"yellow",icon:e.jsxs("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",fill:"currentColor",children:[e.jsx("path",{d:"M12 8v5l4 2"}),e.jsx("circle",{cx:"12",cy:"12",r:"9",fill:"none",stroke:"currentColor",strokeWidth:"2"})]})})]}),e.jsxs("div",{className:"bg-white rounded-xl border shadow-sm overflow-hidden",children:[e.jsxs("div",{className:"px-5 py-4 border-b flex justify-between items-center bg-gray-50",children:[e.jsxs("h3",{className:"font-semibold text-gray-700",children:["Daftar Perusahaan ",e.jsxs("span",{className:"text-xs font-normal text-gray-500",children:["(",k," Data)"]})]}),e.jsxs("div",{className:"relative w-full sm:w-64",children:[e.jsx("input",{type:"text",value:s,onChange:P,placeholder:"Cari ID atau Nama...",className:"w-full pl-10 pr-4 py-2 border rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 outline-none text-sm transition"}),e.jsx("svg",{className:"w-4 h-4 text-gray-400 absolute left-3 top-1/2 -translate-y-1/2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})]}),e.jsxs("button",{onClick:z,className:"bg-indigo-600 hover:bg-indigo-700 text-white px-4 py-2 rounded-lg text-sm font-medium flex items-center gap-2 shadow-sm transition",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 4v16m8-8H4"})}),"Tambah"]})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm text-left",children:[e.jsx("thead",{className:"bg-gray-50 text-gray-600 border-b",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 font-semibold",children:"Perusahaan"}),e.jsx("th",{className:"px-6 py-3 font-semibold",children:"Alamat"}),e.jsx("th",{className:"px-6 py-3 font-semibold",children:"Status"}),e.jsx("th",{className:"px-6 py-3 font-semibold text-center",children:"Aksi"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-100",children:M?e.jsx("tr",{children:e.jsx("td",{colSpan:"4",className:"text-center py-8 text-gray-500",children:"Memuat data..."})}):c.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"4",className:"text-center py-8 text-gray-500",children:"Data tidak ditemukan."})}):c.map(a=>e.jsxs("tr",{className:"hover:bg-gray-50 transition",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"w-8 h-8 rounded-lg bg-indigo-50 text-indigo-600 flex items-center justify-center font-bold text-xs",children:a.nama_perusahaan.charAt(0)}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-gray-900",children:a.nama_perusahaan}),e.jsxs("div",{className:"text-xs text-gray-500 font-mono",children:["ID: ",a.id_perusahaan]})]})]})}),e.jsx("td",{className:"px-6 py-4 text-gray-600 truncate max-w-xs",children:a.alamat||"-"}),e.jsx("td",{className:"px-6 py-4",children:e.jsx(V,{tone:a.status_aktif===!0?"green":a.status_aktif===!1?"red":"yellow",children:a.status_aktif===!0?"Aktif":a.status_aktif===!1?"Suspend":"Pending"})}),e.jsx("td",{className:"px-6 py-4 text-center",children:e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx(b,{tone:"indigo",title:"Edit",onClick:()=>T(a),children:e.jsx("svg",{className:"w-4 h-4",viewBox:"0 0 24 24",fill:"currentColor",children:e.jsx("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04a1 1 0 000-1.41l-2.34-2.34a1 1 0 00-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"})})}),a.status_aktif?e.jsx(b,{tone:"yellow",title:"Suspend",onClick:()=>_(a.id_perusahaan,!0),children:e.jsx("svg",{className:"w-4 h-4",viewBox:"0 0 24 24",fill:"currentColor",children:e.jsx("path",{d:"M6 5h4v14H6V5zm8 0h4v14h-4V5z"})})}):e.jsx(b,{tone:"green",title:"Aktifkan",onClick:()=>_(a.id_perusahaan,!1),children:e.jsx("svg",{className:"w-4 h-4",viewBox:"0 0 24 24",fill:"currentColor",children:e.jsx("path",{d:"M8 5v14l11-7z"})})}),e.jsx(b,{tone:"red",title:"Hapus",onClick:()=>H(a.id_perusahaan),children:e.jsx("svg",{className:"w-4 h-4",viewBox:"0 0 24 24",fill:"currentColor",children:e.jsx("path",{d:"M6 7h12l-1 14H7L6 7zm3-3h6l1 2H8l1-2z"})})})]})})]},a.id_perusahaan))})]})}),e.jsxs("div",{className:"px-5 py-4 border-t bg-gray-50 flex items-center justify-between",children:[e.jsxs("span",{className:"text-sm text-gray-500",children:["Hal ",t," dari ",C||1]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{disabled:t===1,onClick:()=>r(a=>Math.max(1,a-1)),className:"px-3 py-1 bg-white border rounded text-sm disabled:opacity-50 hover:bg-gray-100 transition",children:"Prev"}),e.jsx("button",{disabled:t>=C,onClick:()=>r(a=>a+1),className:"px-3 py-1 bg-white border rounded text-sm disabled:opacity-50 hover:bg-gray-100 transition",children:"Next"})]})]})]}),S&&e.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg overflow-hidden animate-fadeIn",children:[e.jsxs("div",{className:"px-5 py-4 border-b flex items-center justify-between bg-gray-50",children:[e.jsx("h3",{className:"font-bold text-lg text-gray-800",children:y?"Edit Perusahaan":"Tambah Perusahaan"}),e.jsx("button",{onClick:()=>x(!1),className:"text-gray-400 hover:text-gray-600",children:"âœ•"})]}),e.jsxs("form",{onSubmit:$,className:"p-6 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nama Perusahaan"}),e.jsx("input",{className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 outline-none transition",value:n.nama_perusahaan,onChange:a=>h({...n,nama_perusahaan:a.target.value}),placeholder:"Contoh: PT. Teknologi Maju",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Alamat"}),e.jsx("textarea",{className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 outline-none transition",rows:"3",value:n.alamat,onChange:a=>h({...n,alamat:a.target.value}),placeholder:"Alamat lengkap..."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),e.jsxs("select",{value:n.status,onChange:a=>h({...n,status:a.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-indigo-500 outline-none bg-white",children:[e.jsx("option",{value:"Aktif",children:"Aktif"}),e.jsx("option",{value:"Suspend",children:"Suspend"}),e.jsx("option",{value:"Pending",children:"Pending"})]})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-2",children:[e.jsx("button",{type:"button",onClick:()=>x(!1),className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50",children:"Batal"}),e.jsx("button",{type:"submit",className:"px-4 py-2 text-sm font-medium text-white bg-indigo-600 rounded-lg hover:bg-indigo-700 shadow-sm",children:y?"Simpan Perubahan":"Simpan"})]})]})]})})]})}export{Z as default};
