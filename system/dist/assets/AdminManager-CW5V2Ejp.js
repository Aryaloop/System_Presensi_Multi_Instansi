import{r as n,b as A,u as D,j as e,a as h,S as r}from"./index-CMRaJyvN.js";const L=({onClick:o,color:c,icon:i,title:m})=>{const l={indigo:"text-indigo-600 hover:bg-indigo-50",red:"text-red-600 hover:bg-red-50"};return e.jsx("button",{onClick:o,title:m,className:`p-2 rounded transition ${l[c]}`,children:i})};function _(){const[o,c]=n.useState(""),[i,m]=n.useState(""),l=A(),[v,d]=n.useState(!1),[s,u]=n.useState(1),[t,p]=n.useState({username:"",email:"",id_perusahaan:""}),g=15,{data:f,isLoading:w}=D({queryKey:["adminList",s,i],queryFn:async()=>(await h.get(`/api/superadmin/admins?page=${s}&limit=${g}&search=${i}`)).data,keepPreviousData:!0}),y=f?.data||[],b=f?.total||0,j=Math.ceil(b/g),k=a=>{c(a.target.value),u(1),setTimeout(()=>{m(a.target.value)},500)},x=a=>{p({...t,[a.target.name]:a.target.value})},C=async a=>{a.preventDefault();try{await h.post("/api/superadmin/create-admin",t),r.fire("Berhasil","Akun Admin baru berhasil dibuat","success"),d(!1),p({username:"",email:"",id_perusahaan:""}),l.invalidateQueries(["adminList"])}catch(N){r.fire("Gagal",N.response?.data?.message||"Terjadi kesalahan","error")}},S=async a=>{if((await r.fire({title:"Hapus Admin?",text:"Data tidak bisa dikembalikan.",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",confirmButtonText:"Ya, Hapus"})).isConfirmed)try{await h.delete(`/api/superadmin/admins/${a}`),r.fire("Terhapus","Admin berhasil dihapus","success"),l.invalidateQueries(["adminList"])}catch{r.fire("Gagal","Gagal menghapus admin","error")}};return e.jsxs("section",{className:"animate-fadeIn space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"Kelola Admin"}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 w-full sm:w-auto",children:[e.jsxs("div",{className:"relative w-full sm:w-64",children:[e.jsx("input",{type:"text",value:o,onChange:k,placeholder:"Cari Username / Email / UUID...",className:"w-full pl-10 pr-4 py-2 border rounded-lg focus:ring-2 focus:ring-indigo-500 outline-none text-sm transition"}),e.jsx("svg",{className:"w-4 h-4 text-gray-400 absolute left-3 top-1/2 -translate-y-1/2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})]}),e.jsxs("button",{onClick:()=>d(!0),className:"bg-indigo-600 hover:bg-indigo-700 text-white px-4 py-2 rounded-lg flex items-center justify-center gap-2 text-sm font-medium transition shadow-sm whitespace-nowrap",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 4v16m8-8H4"})}),"Tambah Admin"]})]})]}),e.jsxs("div",{className:"bg-white rounded-xl border shadow-sm overflow-hidden",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm text-left",children:[e.jsx("thead",{className:"bg-gray-50 text-gray-600 border-b",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 font-semibold",children:"Username"}),e.jsx("th",{className:"px-6 py-3 font-semibold",children:"Email"}),e.jsx("th",{className:"px-6 py-3 font-semibold",children:"Perusahaan"}),e.jsx("th",{className:"px-6 py-3 font-semibold text-center",children:"Aksi"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-100",children:w?e.jsx("tr",{children:e.jsx("td",{colSpan:"4",className:"text-center py-8 text-gray-500",children:"Memuat data..."})}):y.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"4",className:"text-center py-8 text-gray-500",children:"Data tidak ditemukan."})}):y.map(a=>e.jsxs("tr",{className:"hover:bg-gray-50 transition",children:[e.jsxs("td",{className:"px-6 py-4 font-medium text-gray-900",children:[a.username,e.jsx("div",{className:"text-[10px] text-gray-400 font-mono mt-0.5 truncate w-24",title:a.id_akun,children:a.id_akun})]}),e.jsx("td",{className:"px-6 py-4 text-gray-600",children:a.email}),e.jsxs("td",{className:"px-6 py-4",children:[a.perusahaan?.nama_perusahaan||e.jsx("span",{className:"text-gray-400 italic",children:"Tidak ada data"}),e.jsx("div",{className:"text-xs text-gray-400 font-mono mt-0.5",children:a.id_perusahaan})]}),e.jsx("td",{className:"px-6 py-4 text-center",children:e.jsx("div",{className:"flex items-center justify-center gap-2",children:e.jsx(L,{color:"red",title:"Hapus",onClick:()=>S(a.id_akun),icon:e.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})})})]},a.id_akun))})]})}),e.jsxs("div",{className:"px-5 py-4 border-t bg-gray-50 flex items-center justify-between",children:[e.jsxs("span",{className:"text-sm text-gray-500",children:["Hal ",s," dari ",j||1," ",e.jsxs("span",{className:"hidden sm:inline",children:[" | Total ",b," Admin"]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{disabled:s===1,onClick:()=>u(a=>Math.max(1,a-1)),className:"px-3 py-1 bg-white border rounded text-sm disabled:opacity-50 hover:bg-gray-100 transition",children:"Prev"}),e.jsx("button",{disabled:s>=j,onClick:()=>u(a=>a+1),className:"px-3 py-1 bg-white border rounded text-sm disabled:opacity-50 hover:bg-gray-100 transition",children:"Next"})]})]})]}),v&&e.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 animate-fadeIn",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-800",children:"Tambah Admin Baru"}),e.jsx("button",{onClick:()=>d(!1),className:"text-gray-400 hover:text-gray-600",children:"âœ•"})]}),e.jsxs("form",{onSubmit:C,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Username"}),e.jsx("input",{required:!0,name:"username",value:t.username,onChange:x,className:"w-full border rounded-lg px-3 py-2 outline-none focus:ring-2 focus:ring-indigo-500",placeholder:"Username"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),e.jsx("input",{required:!0,type:"email",name:"email",value:t.email,onChange:x,className:"w-full border rounded-lg px-3 py-2 outline-none focus:ring-2 focus:ring-indigo-500",placeholder:"email@contoh.com"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"ID Perusahaan (Manual)"}),e.jsx("input",{required:!0,name:"id_perusahaan",value:t.id_perusahaan,onChange:x,className:"w-full border rounded-lg px-3 py-2 outline-none focus:ring-2 focus:ring-indigo-500 bg-gray-50",placeholder:"Masukkan ID Perusahaan"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"*Copy ID dari menu 'Perusahaan'"})]}),e.jsxs("div",{className:"flex justify-end gap-2 pt-2",children:[e.jsx("button",{type:"button",onClick:()=>d(!1),className:"px-4 py-2 text-gray-600 hover:bg-gray-100 rounded-lg text-sm",children:"Batal"}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 text-sm font-medium",children:"Simpan"})]})]})]})})]})}export{_ as default};
