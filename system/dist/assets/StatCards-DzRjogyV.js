import{u as h,j as e,a as b}from"./index-CMRaJyvN.js";const y=t=>{const a=new Date(t);return new Date(a.toLocaleString("en-US",{timeZone:"Asia/Jakarta"}))},g=({title:t,value:a,subtext:o,icon:c,colorInfo:l,isLoading:m})=>{const{bg:d,text:n,ring:j}=l;return e.jsxs("div",{className:"relative bg-white rounded-xl p-6 border border-gray-100 shadow-sm hover:shadow-md hover:-translate-y-0.5 transition-all duration-300 group overflow-hidden",children:[e.jsx("div",{className:`absolute -right-4 -top-4 w-16 h-16 rounded-full opacity-10 ${d} group-hover:opacity-15 transition-all duration-500`}),e.jsxs("div",{className:"flex justify-between items-start relative z-10",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wide mb-2",children:t}),e.jsx("div",{className:"mb-1",children:m?e.jsx("div",{className:"h-7 w-20 bg-gray-200 animate-pulse rounded-md"}):e.jsx("h3",{className:"text-xl font-bold text-gray-900 truncate",children:a})}),e.jsx("p",{className:`text-xs font-medium ${n} truncate`,children:o})]}),e.jsx("div",{className:`p-2.5 rounded-lg ml-3 flex-shrink-0 ${d} ${n} shadow-sm ring-1 ${j}`,children:c})]})]})};function L(){const t=new Date,{data:a,isLoading:o}=h({queryKey:["izinSummary"],queryFn:async()=>(await b.get("/api/user/izin/summary")).data}),{data:c,isLoading:l}=h({queryKey:["kehadiran",t.getMonth()+1,t.getFullYear()],queryFn:async()=>(await b.get(`/api/user/kehadiran?bulan=${t.getMonth()+1}&tahun=${t.getFullYear()}`)).data.data||[]}),{data:m,isLoading:d}=h({queryKey:["lokasiShift"],queryFn:async()=>(await b.get("/api/user/lokasi-shift")).data}),n=c||[],u=n.find(s=>{const p=s.jam_masuk?y(s.jam_masuk):null;return p&&p.toDateString()===t.toDateString()})?.status||"belum",v=n.filter(s=>s.status==="HADIR").length,f=a?.pending||0,k=a?.totalWFH||0,x=m?.shift;let i="Belum Absen",r={bg:"bg-gray-50",text:"text-gray-500",ring:"ring-gray-100"};return u==="HADIR"?(i="Hadir",r={bg:"bg-emerald-50",text:"text-emerald-600",ring:"ring-emerald-100"}):u==="TERLAMBAT"?(i="Terlambat",r={bg:"bg-orange-50",text:"text-orange-600",ring:"ring-orange-100"}):u==="WFH"?(i="WFH",r={bg:"bg-blue-50",text:"text-blue-600",ring:"ring-blue-100"}):u==="IZIN"&&(i="Izin",r={bg:"bg-purple-50",text:"text-purple-600",ring:"ring-purple-100"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 mb-8",children:[e.jsx(g,{title:"Status Hari Ini",value:i,subtext:x?`Shift: ${x.jam_masuk} - ${x.jam_pulang}`:"Tidak ada jadwal",colorInfo:r,isLoading:l||d,icon:e.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})}),e.jsx(g,{title:"Total Kehadiran",value:`${v} Hari`,subtext:"Akumulasi bulan ini",isLoading:l,colorInfo:{bg:"bg-blue-50",text:"text-blue-600",ring:"ring-blue-100"},icon:e.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),e.jsx(g,{title:"Izin Pending",value:f,subtext:"Menunggu persetujuan",isLoading:o,colorInfo:{bg:"bg-yellow-50",text:"text-yellow-600",ring:"ring-yellow-100"},icon:e.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),e.jsx(g,{title:"Total WFH",value:`${k} Hari`,subtext:"Bekerja dari rumah",isLoading:o,colorInfo:{bg:"bg-violet-50",text:"text-violet-600",ring:"ring-violet-100"},icon:e.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})})})]})}export{L as S};
